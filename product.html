<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const customers = [
        { id: 1, name: "John Doe", age: 30 },
        { id: 2, name: "Alice Smith", age: 25 },
        { id: 3, name: "Bob Johnson", age: 35 },
        { id: 4, name: "Emily Brown", age: 28 },
        { id: 5, name: "Michael Wilson", age: 40 },
        { id: 6, name: "Sarah Davis", age: 32 },
        { id: 7, name: "David Lee", age: 27 },
      ];
      const orders = [
        {
          order_id: 101,
          customer_id: 1,
          products_count: 5,
          products: [
            { product_id: 1, price: 10.99 },
            { product_id: 2, price: 5.99 },
            { product_id: 3, price: 12.49 },
            { product_id: 4, price: 7.99 },
            { product_id: 5, price: 9.99 },
          ],
        },
        {
          order_id: 102,
          customer_id: 2,
          products_count: 3,
          products: [
            { product_id: 6, price: 15.99 },
            { product_id: 7, price: 8.49 },
            { product_id: 8, price: 6.99 },
          ],
        },
        {
          order_id: 103,
          customer_id: 1,
          products_count: 2,
          products: [
            { product_id: 9, price: 11.29 },
            { product_id: 10, price: 8.99 },
          ],
        },
        {
          order_id: 104,
          customer_id: 3,
          products_count: 4,
          products: [
            { product_id: 11, price: 14.49 },
            { product_id: 12, price: 9.79 },
            { product_id: 13, price: 7.99 },
            { product_id: 14, price: 5.49 },
          ],
        },
        {
          order_id: 105,
          customer_id: 4,
          products_count: 6,
          products: [
            { product_id: 15, price: 12.99 },
            { product_id: 16, price: 6.49 },
            { product_id: 17, price: 8.99 },
            { product_id: 18, price: 14.99 },
            { product_id: 19, price: 7.79 },
            { product_id: 20, price: 10.99 },
          ],
        },
        {
          order_id: 106,
          customer_id: 2,
          products_count: 1,
          products: [{ product_id: 21, price: 3.99 }],
        },
        {
          order_id: 107,
          customer_id: 5,
          products_count: 3,
          products: [
            { product_id: 22, price: 7.49 },
            { product_id: 23, price: 4.29 },
            { product_id: 24, price: 9.99 },
          ],
        },
        {
          order_id: 108,
          customer_id: 6,
          products_count: 2,
          products: [
            { product_id: 25, price: 5.99 },
            { product_id: 26, price: 8.99 },
          ],
        },
        {
          order_id: 109,
          customer_id: 7,
          products_count: 4,
          products: [
            { product_id: 27, price: 11.99 },
            { product_id: 28, price: 6.49 },
            { product_id: 29, price: 9.99 },
            { product_id: 30, price: 4.79 },
          ],
        },
        {
          order_id: 110,
          customer_id: 1,
          products_count: 3,
          products: [
            { product_id: 31, price: 8.99 },
            { product_id: 32, price: 13.49 },
            { product_id: 33, price: 6.99 },
          ],
        },
        {
          order_id: 111,
          customer_id: 2,
          products_count: 2,
          products: [
            { product_id: 34, price: 5.99 },
            { product_id: 35, price: 7.99 },
          ],
        },
        {
          order_id: 112,
          customer_id: 3,
          products_count: 5,
          products: [
            { product_id: 36, price: 9.49 },
            { product_id: 37, price: 7.79 },
            { product_id: 38, price: 12.99 },
            { product_id: 39, price: 8.99 },
            { product_id: 40, price: 6.49 },
          ],
        },
        {
          order_id: 113,
          customer_id: 4,
          products_count: 1,
          products: [{ product_id: 41, price: 4.99 }],
        },
        {
          order_id: 114,
          customer_id: 5,
          products_count: 4,
          products: [
            { product_id: 42, price: 7.49 },
            { product_id: 43, price: 9.99 },
            { product_id: 44, price: 6.99 },
            { product_id: 45, price: 8.49 },
          ],
        },
        {
          order_id: 115,
          customer_id: 6,
          products_count: 3,
          products: [
            { product_id: 46, price: 11.29 },
            { product_id: 47, price: 5.99 },
            { product_id: 48, price: 10.99 },
          ],
        },
        {
          order_id: 116,
          customer_id: 7,
          products_count: 2,
          products: [
            { product_id: 49, price: 7.79 },
            { product_id: 50, price: 8.99 },
          ],
        },
        {
          order_id: 117,
          customer_id: 1,
          products_count: 4,
          products: [
            { product_id: 51, price: 9.99 },
            { product_id: 52, price: 8.49 },
            { product_id: 53, price: 7.79 },
            { product_id: 54, price: 11.49 },
          ],
        },
        {
          order_id: 118,
          customer_id: 2,
          products_count: 6,
          products: [
            { product_id: 55, price: 6.49 },
            { product_id: 56, price: 9.99 },
            { product_id: 57, price: 7.79 },
            { product_id: 58, price: 14.49 },
            { product_id: 59, price: 8.99 },
            { product_id: 60, price: 10.99 },
          ],
        },
        {
          order_id: 119,
          customer_id: 3,
          products_count: 2,
          products: [
            { product_id: 61, price: 8.99 },
            { product_id: 62, price: 12.49 },
          ],
        },
      ];

      customers_with_amount = [];

      for (let i = 0; i < customers.length; i++) {
        customer = customers[i];

        let totalSpent = 0;

        for (let j = 0; j < orders.length; j++) {
          order = orders[j];

          if (order.customer_id === customer.id) {
            let orderSum = 0;

            for (let k = 0; k < order.products.length; k++) {
              product = order.products[k];

              orderSum += product.price;
            }

            totalSpent += orderSum;
          }
        }

        customers_with_amount.push({
          ...customer,
          total_spent: totalSpent.toFixed(2),
        });
      }
      console.log(customers_with_amount);
    </script>
  </body>
</html>
